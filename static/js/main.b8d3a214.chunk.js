(this.webpackJsonpexpenses=this.webpackJsonpexpenses||[]).push([[0],{109:function(e,t,n){e.exports={input:"styles_input__1Ce_r"}},230:function(e,t,n){},231:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n(2),s=n.n(r),c=n(53),o=n.n(c),i=n(69),l=n(15),u=n(5),p=n(6),d=n(9),j=n(10),b=n(100),h=n.n(b),x=n(23),f=n(17),O=n.n(f),v=n(25),m=n(45),y=n(102),_={signInOptions:[m.a.auth.EmailAuthProvider.PROVIDER_ID],signInSuccessUrl:"/"};m.a.initializeApp({apiKey:"AIzaSyA7_bDQW8uoAWXe9tSUodqjj9PcUHKE9tA",authDomain:"fir-crud-react-ee24d.firebaseapp.com",databaseURL:"https://fir-crud-react-ee24d-default-rtdb.firebaseio.com",projectId:"fir-crud-react-ee24d",storageBucket:"fir-crud-react-ee24d.appspot.com",messagingSenderId:"559140621049",appId:"1:559140621049:web:eace1c6be3fceaf4bd3028",measurementId:"G-90Q27KYY0S"});var g=m.a.auth(),C=m.a.firestore();C.settings({timestampsInSnapshots:!0});function k(e){return g.onAuthStateChanged((function(t){if(t&&!t.isAnonymous){var n=t.uid,a=t.email,r=t.dislpayName;console.info("service/watcher.js"),console.log("logged in"),e({id:n,email:a,dislpayName:r})}else console.info("service/watcher.js"),console.log("NOT logged in"),e(null)}))}function w(e){return S.apply(this,arguments)}function S(){return(S=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.collection("expenses").doc().set(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return R.apply(this,arguments)}function R(){return(R=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.collection("expenses").doc(t).delete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return B.apply(this,arguments)}function B(){return(B=Object(v.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.collection("expenses").doc(t).update(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=s.a.createContext({}),A=(N.Consumer,function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={expenses:[]},e.deleteExpense=function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("context/expense.js"),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),e.createExpense=function(){var e=Object(v.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(Object(x.a)(Object(x.a)({},t),{},{date:Date.now()}));case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("context/expense.js"),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),e.updateExpense=function(){var e=Object(v.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(t,n);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("context/expense.js"),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}(),e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.userWatcherUnsub=k((function(t){var n;t&&!e.expenseWatcherUnsub&&(e.expenseWatcherUnsub=(n=function(t){e.setState({expenses:t})},C.collection("expenses").onSnapshot((function(e){var t=[];e.forEach((function(e){var n=e.data();t.push(Object(x.a)(Object(x.a)({},n),{},{amount:+n.amount,id:e.id,date:n.date&&new Date(n.date)}))})),n(t)}))))}))}},{key:"componentWillUnmount",value:function(){this.expenseWatcherUnsub&&this.expenseWatcherUnsub()}},{key:"render",value:function(){var e=this.props.children;return Object(a.jsx)(N.Provider,{value:Object(x.a)(Object(x.a)({},this.state),{},{deleteExpense:this.deleteExpense,createExpense:this.createExpense,updateExpense:this.updateExpense}),children:e})}}]),n}(s.a.Component)),D=n(70),L=n.n(D),U=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.children;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:L.a.appBar,children:Object(a.jsx)("span",{children:"App"})}),Object(a.jsx)("div",{className:L.a.content,children:e})]})}}]),n}(s.a.Component),W=n(37),P=n.n(W),T=n(43),F=n(44),M=n(109),Y=n.n(M);function q(e){var t=Object.assign({},e);return Object(a.jsx)("input",Object(x.a)({className:Y.a.input},t))}var H=n(72),z=n.n(H);function G(e){var t=e.type,n=e.onClick,r=e.label,s=e.disabled,c=z.a[t];return Object(a.jsx)("div",{className:"".concat(c," ").concat(s?z.a.disabled:""),onClick:function(e){s||n(e)},children:r})}G.defaultProps={type:"regular"};var V=n(59),J=n.n(V),K=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.options,r=t.value,s=t.onChange,c=t.onBlur,o=t.placeholder,i=this.state.isOpen;return Object(a.jsxs)("div",{className:J.a.option,children:[Object(a.jsx)(q,{placeholder:o,type:"text",value:r,onChange:function(){},onClick:function(){return e.setState({isOpen:!i})}}),i&&Object(a.jsx)("ul",{className:J.a.optionList,children:n.map((function(t){return Object(a.jsx)("li",{className:J.a.optionListItem,onClick:function(n){s(t.value),c(n),e.setState({isOpen:!1})},children:t.label},t.value)}))})]})}}]),n}(s.a.Component),Q=n(73),X=n.n(Q),Z=function(e){var t,n=e.type,r=e.children;return"row"===n?t=X.a.formControlRow:"block"===n&&(t=X.a.formControlBlock),Object(a.jsx)("div",{className:t,children:r})},$=n(74),ee=n.n($),te=F.b().shape({type:F.c().min(1).required(),amount:F.a().required(),description:F.c()}),ne=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={expense:e.props.expense,showReload:!1},e.onSubmit=function(){var t=Object(v.a)(O.a.mark((function t(n,a){var r,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.setSubmitting,!(s=e.state.expense)){t.next=7;break}return t.next=5,e.context.updateExpense(s.id,n);case 5:t.next=9;break;case 7:return t.next=9,e.context.createExpense(n);case 9:r(!1),e.props.onClose();case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onDelete=Object(v.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.expense,t.next=3,e.context.deleteExpense(n.id);case 3:e.props.onClose();case 4:case"end":return t.stop()}}),t)}))),e.onCancel=function(){e.props.onClose()},e}return Object(p.a)(n,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.expense,n=e.expense;n&&t&&(n.type!==t.type||n.amount!==t.amount||n.description!==t.description)&&this.setState({expense:n,showReload:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.expense,r=t.showReload,c=n||{},i=Object(a.jsx)("div",{className:ee.a.modalContainer,children:Object(a.jsxs)("div",{className:ee.a.modalBox,children:[Object(a.jsx)("h1",{children:"Expenses"}),Object(a.jsx)(T.b,{initialValues:{type:c.type||"",amount:c.amount||"",description:c.description||""},validationSchema:te,onSubmit:this.onSubmit,render:function(t){var c=t.handleChange,o=t.handleBlur,i=t.handleSubmit,l=t.handleReset,u=(t.onReset,t.values),p=t.isValid,d=t.isSubmitting;return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsxs)(Z,{type:"row",children:[Object(a.jsx)(K,{value:u.type,onChange:c("type"),onBlur:o("type"),placeholder:"Type",options:[{value:"house",label:"House"},{value:"savings",label:"Savings"},{value:"transportation",label:"Transportation"}]}),Object(a.jsx)(T.a,{name:"type"})]}),Object(a.jsxs)(Z,{type:"row",children:[Object(a.jsx)(q,{value:u.amount,onChange:c("amount"),onBlur:o("amount"),placeholder:"Amount"}),Object(a.jsx)(T.a,{name:"amount"})]}),Object(a.jsxs)(Z,{type:"block",children:[Object(a.jsx)(q,{value:u.description,onChange:c("description"),onBlur:o("description"),placeholder:"Description"}),Object(a.jsx)(T.a,{name:"description"})]}),Object(a.jsxs)(Z,{type:"block",children:[Object(a.jsx)(G,{label:n?"Update":"Create",disabled:d||!p,onClick:i}),Object(a.jsx)(G,{label:"Cancel",type:"outline",onClick:e.onCancel}),n&&Object(a.jsx)(G,{label:"Delete",type:"warning",onClick:e.onDelete})]}),r&&!d&&Object(a.jsx)(Z,{type:"row",children:Object(a.jsxs)("div",{children:["This resource has been updated.",Object(a.jsx)(G,{label:"Click here",type:"inline",onClick:function(){l(),e.setState({showReload:!1})}})," to refresh."]})})]})}})]})});return o.a.createPortal(i,document.getElementById("modal-root"))}}]),n}(s.a.Component);ne.contextType=N;var ae=ne,re=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={expenseId:null},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.context.expenses,n=this.state,r=n.expenseId,s=n.isOpen,c=t.find((function(e){return e.id===r}));return Object(a.jsxs)(U,{children:[Object(a.jsxs)("div",{className:P.a.container,children:[Object(a.jsx)("div",{className:P.a.buttonFloat,onClick:function(){return e.setState({isOpen:!0,expenseId:null})},children:"+"}),Object(a.jsxs)("table",{className:P.a.table,cellSpacing:"0",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{className:P.a.tableHeader,children:[Object(a.jsx)("th",{children:"Date"}),Object(a.jsx)("th",{children:"Type"}),Object(a.jsx)("th",{children:"Amount"}),Object(a.jsx)("th",{children:"Description"})]})}),Object(a.jsx)("tbody",{children:t.map((function(t){return Object(a.jsxs)("tr",{className:P.a.tableRow,onClick:function(){return e.setState({expenseId:t.id,isOpen:!0})},children:[Object(a.jsx)("td",{children:h()(t.date).format("DD MMM YYY hh:mm a")}),Object(a.jsx)("td",{children:t.type}),Object(a.jsx)("td",{children:t.amount}),Object(a.jsx)("td",{children:t.description})]},t.id)}))})]}),Object(a.jsx)("h1",{children:"Expenses: "}),this.context.expenses.length]}),s&&Object(a.jsx)(ae,{expense:c,onClose:function(){return e.setState({expenseId:null,isOpen:!1})}})]})}}]),n}(s.a.Component);re.contextType=N;var se=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e;e="#firebaseui",new y.a.AuthUI(g).start(e,_)}},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{id:"firebaseui"})})}}]),n}(s.a.Component),ce=s.a.createContext(),oe=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={authReady:!1,isLoggedIn:!1,user:null},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;k((function(t){t?e.setState({authReady:!0,isLoggedIn:!0,user:t}):e.setState({authReady:!0,isLoggedIn:!1,user:null})}))}},{key:"render",value:function(){return Object(a.jsx)(ce.Provider,{value:this.state,children:this.props.children})}}]),n}(s.a.Component),ie=(ce.Consumer,n(110)),le=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=Object(ie.a)(e,["type"]),r=this.context.isLoggedIn;return"private"!==t||r?"public"===t&&r?Object(a.jsx)(l.a,{to:"/dashboard"}):Object(a.jsx)(l.b,Object(x.a)({},n)):Object(a.jsx)(l.a,{to:"/login"})}}]),n}(s.a.Component);le.contextType=ce;var ue=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.children;return this.context.authReady?e:Object(a.jsx)(a.Fragment,{children:"Loading..."})}}]),n}(s.a.Component);ue.contextType=ce;n(230);var pe=Object(a.jsx)(i.a,{children:Object(a.jsx)(oe,{children:Object(a.jsx)(A,{children:Object(a.jsx)(ue,{children:Object(a.jsxs)(l.d,{children:[Object(a.jsx)(le,{type:"public",path:"/login",component:se}),Object(a.jsx)(le,{type:"private",path:"/dashboard",component:re}),Object(a.jsx)(l.a,{from:"/",to:"/dashboard"})]})})})})});o.a.render(pe,document.getElementById("root"))},37:function(e,t,n){e.exports={buttonFloat:"styles_buttonFloat__qPRBS",container:"styles_container__2hZM2",table:"styles_table__18Nbm",tableHeader:"styles_tableHeader__2XcDY",tableRow:"styles_tableRow__1tTRj"}},59:function(e,t,n){e.exports={option:"styles_option__2Cg5J",optionList:"styles_optionList__2w6GO",optionListItem:"styles_optionListItem__LkF8w"}},70:function(e,t,n){e.exports={appBar:"style_appBar__1vRCA",content:"style_content__2IWBq"}},72:function(e,t,n){e.exports={regular:"styles_regular__2yoCp",disabled:"styles_disabled__FvkPc",warning:"styles_warning__2t9Lt",outline:"styles_outline__vGiLI",inline:"styles_inline__w29zj"}},73:function(e,t,n){e.exports={formControlRow:"styles_formControlRow__1V2au",formControlBlock:"styles_formControlBlock__2-Gs3"}},74:function(e,t,n){e.exports={modalContainer:"styles_modalContainer__1inij",modalBox:"styles_modalBox__Wd3rz"}}},[[231,1,2]]]);
//# sourceMappingURL=main.b8d3a214.chunk.js.map